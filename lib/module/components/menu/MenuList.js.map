{"version":3,"names":["React","StyleSheet","Animated","runOnJS","useAnimatedProps","useAnimatedReaction","useAnimatedStyle","useDerivedValue","useSharedValue","withSpring","withTiming","calculateMenuHeight","menuAnimationAnchor","BlurView","MenuItems","SPRING_CONFIGURATION_MENU","HOLD_ITEM_TRANSFORM_DURATION","IS_IOS","CONTEXT_MENU_STATE","styles","useInternal","deepEqual","leftOrRight","AnimatedView","createAnimatedComponent","MenuListComponent","state","theme","menuProps","itemList","setItemList","useState","menuHeight","itemsWithSeparator","value","items","filter","item","withSeparator","length","prevList","messageStyles","translate","anchorPosition","itemWidth","_leftPosition","menuScaleAnimation","ACTIVE","duration","opacityAnimation","left","height","opacity","transform","translateX","beginningTransformations","translateY","scale","endingTransformations","animatedInnerContainerStyle","backgroundColor","animatedProps","tint","setter","_items","menuContainer","absoluteFillObject","menuInnerContainer","MenuList","memo"],"sources":["MenuList.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { StyleSheet } from \"react-native\";\r\n\r\nimport Animated, {\r\n  runOnJS,\r\n  useAnimatedProps,\r\n  useAnimatedReaction,\r\n  useAnimatedStyle,\r\n  useDerivedValue,\r\n  useSharedValue,\r\n  withSpring,\r\n  withTiming,\r\n} from \"react-native-reanimated\";\r\n\r\nimport {\r\n  calculateMenuHeight,\r\n  menuAnimationAnchor,\r\n} from \"../../utils/calculations\";\r\nimport { BlurView } from \"expo-blur\";\r\n\r\nimport MenuItems from \"./MenuItems\";\r\n\r\nimport {\r\n  SPRING_CONFIGURATION_MENU,\r\n  HOLD_ITEM_TRANSFORM_DURATION,\r\n  IS_IOS,\r\n  CONTEXT_MENU_STATE,\r\n} from \"../../constants\";\r\n\r\nimport styles from \"./styles\";\r\nimport { MenuItemProps } from \"./types\";\r\nimport { useInternal } from \"../../hooks\";\r\nimport { deepEqual } from \"../../utils/validations\";\r\nimport { leftOrRight } from \"./calculations\";\r\n\r\nconst AnimatedView = Animated.createAnimatedComponent(BlurView);\r\n\r\nconst MenuListComponent = () => {\r\n  const { state, theme, menuProps } = useInternal();\r\n\r\n  const [itemList, setItemList] = React.useState<MenuItemProps[]>([]);\r\n\r\n  const menuHeight = useDerivedValue(() => {\r\n    const itemsWithSeparator = menuProps.value.items.filter(\r\n      (item) => item.withSeparator\r\n    );\r\n    return calculateMenuHeight(\r\n      menuProps.value.items.length,\r\n      itemsWithSeparator.length\r\n    );\r\n  }, [menuProps]);\r\n  const prevList = useSharedValue<MenuItemProps[]>([]);\r\n\r\n  const messageStyles = useAnimatedStyle(() => {\r\n    const itemsWithSeparator = menuProps.value.items.filter(\r\n      (item) => item.withSeparator\r\n    );\r\n\r\n    const translate = menuAnimationAnchor(\r\n      menuProps.value.anchorPosition,\r\n      menuProps.value.itemWidth,\r\n      menuProps.value.items.length,\r\n      itemsWithSeparator.length\r\n    );\r\n\r\n    const _leftPosition = leftOrRight(menuProps);\r\n\r\n    const menuScaleAnimation = () =>\r\n      state.value === CONTEXT_MENU_STATE.ACTIVE\r\n        ? withSpring(1, SPRING_CONFIGURATION_MENU)\r\n        : withTiming(0, {\r\n            duration: HOLD_ITEM_TRANSFORM_DURATION,\r\n          });\r\n\r\n    const opacityAnimation = () =>\r\n      withTiming(state.value === CONTEXT_MENU_STATE.ACTIVE ? 1 : 0, {\r\n        duration: HOLD_ITEM_TRANSFORM_DURATION,\r\n      });\r\n\r\n    return {\r\n      left: _leftPosition,\r\n      height: menuHeight.value,\r\n      opacity: opacityAnimation(),\r\n      transform: [\r\n        { translateX: translate.beginningTransformations.translateX },\r\n        { translateY: translate.beginningTransformations.translateY },\r\n        {\r\n          scale: menuScaleAnimation(),\r\n        },\r\n        { translateX: translate.endingTransformations.translateX },\r\n        { translateY: translate.endingTransformations.translateY },\r\n      ],\r\n    };\r\n  });\r\n\r\n  const animatedInnerContainerStyle = useAnimatedStyle(() => {\r\n    return {\r\n      backgroundColor:\r\n        theme.value === \"light\"\r\n          ? IS_IOS\r\n            ? \"rgba(255, 255, 255, .75)\"\r\n            : \"rgba(255, 255, 255, .95)\"\r\n          : IS_IOS\r\n          ? \"rgba(0,0,0,0.5)\"\r\n          : \"rgba(39, 39, 39, .8)\",\r\n    };\r\n  }, [theme]);\r\n\r\n  const animatedProps = useAnimatedProps(() => {\r\n    return { tint: theme.value };\r\n  }, [theme]);\r\n\r\n  const setter = (items: MenuItemProps[]) => {\r\n    setItemList(items);\r\n    prevList.value = items;\r\n  };\r\n\r\n  useAnimatedReaction(\r\n    () => menuProps.value.items,\r\n    (_items) => {\r\n      if (!deepEqual(_items, prevList.value)) {\r\n        runOnJS(setter)(_items);\r\n      }\r\n    },\r\n    [menuProps]\r\n  );\r\n\r\n  return (\r\n    <AnimatedView\r\n      intensity={100}\r\n      animatedProps={animatedProps}\r\n      style={[styles.menuContainer, messageStyles]}\r\n    >\r\n      <Animated.View\r\n        style={[\r\n          StyleSheet.absoluteFillObject,\r\n          styles.menuInnerContainer,\r\n          animatedInnerContainerStyle,\r\n        ]}\r\n      >\r\n        <MenuItems items={itemList} />\r\n      </Animated.View>\r\n    </AnimatedView>\r\n  );\r\n};\r\n\r\nconst MenuList = React.memo(MenuListComponent);\r\n\r\nexport default MenuList;\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,cAA3B;AAEA,OAAOC,QAAP,IACEC,OADF,EAEEC,gBAFF,EAGEC,mBAHF,EAIEC,gBAJF,EAKEC,eALF,EAMEC,cANF,EAOEC,UAPF,EAQEC,UARF,QASO,yBATP;AAWA,SACEC,mBADF,EAEEC,mBAFF,QAGO,0BAHP;AAIA,SAASC,QAAT,QAAyB,WAAzB;AAEA,OAAOC,SAAP,MAAsB,aAAtB;AAEA,SACEC,yBADF,EAEEC,4BAFF,EAGEC,MAHF,EAIEC,kBAJF,QAKO,iBALP;AAOA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,SAAT,QAA0B,yBAA1B;AACA,SAASC,WAAT,QAA4B,gBAA5B;AAEA,MAAMC,YAAY,GAAGrB,QAAQ,CAACsB,uBAAT,CAAiCX,QAAjC,CAArB;;AAEA,MAAMY,iBAAiB,GAAG,MAAM;EAC9B,MAAM;IAAEC,KAAF;IAASC,KAAT;IAAgBC;EAAhB,IAA8BR,WAAW,EAA/C;EAEA,MAAM,CAACS,QAAD,EAAWC,WAAX,IAA0B9B,KAAK,CAAC+B,QAAN,CAAgC,EAAhC,CAAhC;EAEA,MAAMC,UAAU,GAAGzB,eAAe,CAAC,MAAM;IACvC,MAAM0B,kBAAkB,GAAGL,SAAS,CAACM,KAAV,CAAgBC,KAAhB,CAAsBC,MAAtB,CACxBC,IAAD,IAAUA,IAAI,CAACC,aADU,CAA3B;IAGA,OAAO3B,mBAAmB,CACxBiB,SAAS,CAACM,KAAV,CAAgBC,KAAhB,CAAsBI,MADE,EAExBN,kBAAkB,CAACM,MAFK,CAA1B;EAID,CARiC,EAQ/B,CAACX,SAAD,CAR+B,CAAlC;EASA,MAAMY,QAAQ,GAAGhC,cAAc,CAAkB,EAAlB,CAA/B;EAEA,MAAMiC,aAAa,GAAGnC,gBAAgB,CAAC,MAAM;IAC3C,MAAM2B,kBAAkB,GAAGL,SAAS,CAACM,KAAV,CAAgBC,KAAhB,CAAsBC,MAAtB,CACxBC,IAAD,IAAUA,IAAI,CAACC,aADU,CAA3B;IAIA,MAAMI,SAAS,GAAG9B,mBAAmB,CACnCgB,SAAS,CAACM,KAAV,CAAgBS,cADmB,EAEnCf,SAAS,CAACM,KAAV,CAAgBU,SAFmB,EAGnChB,SAAS,CAACM,KAAV,CAAgBC,KAAhB,CAAsBI,MAHa,EAInCN,kBAAkB,CAACM,MAJgB,CAArC;;IAOA,MAAMM,aAAa,GAAGvB,WAAW,CAACM,SAAD,CAAjC;;IAEA,MAAMkB,kBAAkB,GAAG,MACzBpB,KAAK,CAACQ,KAAN,KAAgBhB,kBAAkB,CAAC6B,MAAnC,GACItC,UAAU,CAAC,CAAD,EAAIM,yBAAJ,CADd,GAEIL,UAAU,CAAC,CAAD,EAAI;MACZsC,QAAQ,EAAEhC;IADE,CAAJ,CAHhB;;IAOA,MAAMiC,gBAAgB,GAAG,MACvBvC,UAAU,CAACgB,KAAK,CAACQ,KAAN,KAAgBhB,kBAAkB,CAAC6B,MAAnC,GAA4C,CAA5C,GAAgD,CAAjD,EAAoD;MAC5DC,QAAQ,EAAEhC;IADkD,CAApD,CADZ;;IAKA,OAAO;MACLkC,IAAI,EAAEL,aADD;MAELM,MAAM,EAAEnB,UAAU,CAACE,KAFd;MAGLkB,OAAO,EAAEH,gBAAgB,EAHpB;MAILI,SAAS,EAAE,CACT;QAAEC,UAAU,EAAEZ,SAAS,CAACa,wBAAV,CAAmCD;MAAjD,CADS,EAET;QAAEE,UAAU,EAAEd,SAAS,CAACa,wBAAV,CAAmCC;MAAjD,CAFS,EAGT;QACEC,KAAK,EAAEX,kBAAkB;MAD3B,CAHS,EAMT;QAAEQ,UAAU,EAAEZ,SAAS,CAACgB,qBAAV,CAAgCJ;MAA9C,CANS,EAOT;QAAEE,UAAU,EAAEd,SAAS,CAACgB,qBAAV,CAAgCF;MAA9C,CAPS;IAJN,CAAP;EAcD,CAxCqC,CAAtC;EA0CA,MAAMG,2BAA2B,GAAGrD,gBAAgB,CAAC,MAAM;IACzD,OAAO;MACLsD,eAAe,EACbjC,KAAK,CAACO,KAAN,KAAgB,OAAhB,GACIjB,MAAM,GACJ,0BADI,GAEJ,0BAHN,GAIIA,MAAM,GACN,iBADM,GAEN;IARD,CAAP;EAUD,CAXmD,EAWjD,CAACU,KAAD,CAXiD,CAApD;EAaA,MAAMkC,aAAa,GAAGzD,gBAAgB,CAAC,MAAM;IAC3C,OAAO;MAAE0D,IAAI,EAAEnC,KAAK,CAACO;IAAd,CAAP;EACD,CAFqC,EAEnC,CAACP,KAAD,CAFmC,CAAtC;;EAIA,MAAMoC,MAAM,GAAI5B,KAAD,IAA4B;IACzCL,WAAW,CAACK,KAAD,CAAX;IACAK,QAAQ,CAACN,KAAT,GAAiBC,KAAjB;EACD,CAHD;;EAKA9B,mBAAmB,CACjB,MAAMuB,SAAS,CAACM,KAAV,CAAgBC,KADL,EAEhB6B,MAAD,IAAY;IACV,IAAI,CAAC3C,SAAS,CAAC2C,MAAD,EAASxB,QAAQ,CAACN,KAAlB,CAAd,EAAwC;MACtC/B,OAAO,CAAC4D,MAAD,CAAP,CAAgBC,MAAhB;IACD;EACF,CANgB,EAOjB,CAACpC,SAAD,CAPiB,CAAnB;EAUA,oBACE,oBAAC,YAAD;IACE,SAAS,EAAE,GADb;IAEE,aAAa,EAAEiC,aAFjB;IAGE,KAAK,EAAE,CAAC1C,MAAM,CAAC8C,aAAR,EAAuBxB,aAAvB;EAHT,gBAKE,oBAAC,QAAD,CAAU,IAAV;IACE,KAAK,EAAE,CACLxC,UAAU,CAACiE,kBADN,EAEL/C,MAAM,CAACgD,kBAFF,EAGLR,2BAHK;EADT,gBAOE,oBAAC,SAAD;IAAW,KAAK,EAAE9B;EAAlB,EAPF,CALF,CADF;AAiBD,CA3GD;;AA6GA,MAAMuC,QAAQ,gBAAGpE,KAAK,CAACqE,IAAN,CAAW5C,iBAAX,CAAjB;AAEA,eAAe2C,QAAf"}
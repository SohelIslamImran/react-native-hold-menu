{"version":3,"names":["AnimatedBlurView","Animated","createAnimatedComponent","BlurView","BackdropComponent","blurViewIntensity","backdropDarkBackgroundColor","BACKDROP_DARK_BACKGROUND_COLOR","backdropLightBackgroundColor","BACKDROP_LIGHT_BACKGROUND_COLOR","state","theme","useInternal","tapGestureEvent","useAnimatedGestureHandler","onStart","event","context","startPosition","x","y","onCancel","value","CONTEXT_MENU_STATE","END","onEnd","distance","Math","hypot","shouldClose","isStateActive","ACTIVE","animatedContainerStyle","useAnimatedStyle","topValueAnimation","withDelay","HOLD_ITEM_TRANSFORM_DURATION","withTiming","WINDOW_HEIGHT","duration","opacityValueAnimation","top","opacity","animatedContainerProps","useAnimatedProps","intensity","animatedInnerContainerStyle","backgroundColor","styles","container","StyleSheet","absoluteFillObject","Backdrop","memo"],"sources":["Backdrop.tsx"],"sourcesContent":["import React, { memo } from \"react\";\r\nimport { StyleSheet } from \"react-native\";\r\nimport Animated, {\r\n  useAnimatedGestureHandler,\r\n  useAnimatedProps,\r\n  useAnimatedStyle,\r\n  withDelay,\r\n  withTiming,\r\n} from \"react-native-reanimated\";\r\nimport {\r\n  TapGestureHandler,\r\n  TapGestureHandlerGestureEvent,\r\n} from \"react-native-gesture-handler\";\r\n\r\n// Components\r\nimport { BlurView } from \"expo-blur\";\r\n\r\n// Utils\r\nimport { styles } from \"./styles\";\r\nimport {\r\n  CONTEXT_MENU_STATE,\r\n  HOLD_ITEM_TRANSFORM_DURATION,\r\n  WINDOW_HEIGHT,\r\n} from \"../../constants\";\r\nimport {\r\n  BACKDROP_LIGHT_BACKGROUND_COLOR,\r\n  BACKDROP_DARK_BACKGROUND_COLOR,\r\n} from \"./constants\";\r\nimport { useInternal } from \"../../hooks\";\r\nimport { BackdropProps } from \"../provider/types\";\r\n\r\nconst AnimatedBlurView = Animated.createAnimatedComponent(BlurView);\r\n\r\ntype Context = {\r\n  startPosition: {\r\n    x: number;\r\n    y: number;\r\n  };\r\n};\r\n\r\nconst BackdropComponent = ({\r\n  blurViewIntensity = 100,\r\n  backdropDarkBackgroundColor = BACKDROP_DARK_BACKGROUND_COLOR,\r\n  backdropLightBackgroundColor = BACKDROP_LIGHT_BACKGROUND_COLOR,\r\n}: BackdropProps) => {\r\n  const { state, theme } = useInternal();\r\n\r\n  const tapGestureEvent = useAnimatedGestureHandler<\r\n    TapGestureHandlerGestureEvent,\r\n    Context\r\n  >(\r\n    {\r\n      onStart: (event, context) => {\r\n        context.startPosition = { x: event.x, y: event.y };\r\n      },\r\n      onCancel: () => {\r\n        state.value = CONTEXT_MENU_STATE.END;\r\n      },\r\n      onEnd: (event, context) => {\r\n        const distance = Math.hypot(\r\n          event.x - context.startPosition.x,\r\n          event.y - context.startPosition.y\r\n        );\r\n        const shouldClose = distance < 10;\r\n        const isStateActive = state.value === CONTEXT_MENU_STATE.ACTIVE;\r\n\r\n        if (shouldClose && isStateActive) {\r\n          state.value = CONTEXT_MENU_STATE.END;\r\n        }\r\n      },\r\n    },\r\n    [state]\r\n  );\r\n\r\n  const animatedContainerStyle = useAnimatedStyle(() => {\r\n    const topValueAnimation = () =>\r\n      state.value === CONTEXT_MENU_STATE.ACTIVE\r\n        ? 0\r\n        : withDelay(\r\n            HOLD_ITEM_TRANSFORM_DURATION,\r\n            withTiming(WINDOW_HEIGHT, {\r\n              duration: 0,\r\n            })\r\n          );\r\n\r\n    const opacityValueAnimation = () =>\r\n      withTiming(state.value === CONTEXT_MENU_STATE.ACTIVE ? 1 : 0, {\r\n        duration: HOLD_ITEM_TRANSFORM_DURATION,\r\n      });\r\n\r\n    return {\r\n      top: topValueAnimation(),\r\n      opacity: opacityValueAnimation(),\r\n    };\r\n  });\r\n\r\n  const animatedContainerProps = useAnimatedProps(() => {\r\n    return {\r\n      intensity: withTiming(\r\n        state.value === CONTEXT_MENU_STATE.ACTIVE ? blurViewIntensity : 0,\r\n        {\r\n          duration: HOLD_ITEM_TRANSFORM_DURATION,\r\n        }\r\n      ),\r\n    };\r\n  });\r\n\r\n  const animatedInnerContainerStyle = useAnimatedStyle(() => {\r\n    const backgroundColor =\r\n      theme.value === \"light\"\r\n        ? backdropLightBackgroundColor\r\n        : backdropDarkBackgroundColor;\r\n\r\n    return { backgroundColor };\r\n  }, [theme]);\r\n\r\n  return (\r\n    <TapGestureHandler onHandlerStateChange={tapGestureEvent}>\r\n      <AnimatedBlurView\r\n        // @ts-ignore\r\n        tint=\"default\"\r\n        animatedProps={animatedContainerProps}\r\n        style={[styles.container, animatedContainerStyle]}\r\n      >\r\n        <Animated.View\r\n          style={[\r\n            { ...StyleSheet.absoluteFillObject },\r\n            animatedInnerContainerStyle,\r\n          ]}\r\n        />\r\n      </AnimatedBlurView>\r\n    </TapGestureHandler>\r\n  );\r\n};\r\n\r\nconst Backdrop = memo(BackdropComponent);\r\n\r\nexport default Backdrop;\r\n"],"mappings":"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"}